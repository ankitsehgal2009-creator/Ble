<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CryostatControl — Horizontal UI</title>
<style>
  :root {
    --bg:#0f1721;
    --card:#0b1320;
    --muted:#98a0aa;
    --accent:#2bb7d8;
    --ok:#28c76f;
    --warn:#ffb020;
    --alert:#ff5252;
  }
  * { box-sizing:border-box; font-family:Inter,system-ui,sans-serif; }
  html, body {
    margin:0; padding:0; height:100%; width:100%;
    overflow:hidden; background:linear-gradient(180deg,#071018,#071826);
    color:#e6eef6;
  }

  /* Container that scrolls horizontally */
  .row-scroll {
    display:flex;
    flex-direction:row;
    height:100vh;
    overflow-x:auto;
    overflow-y:hidden;
    scroll-behavior:smooth;
    -webkit-overflow-scrolling:touch;
  }

  section {
    flex:0 0 auto;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    padding:16px;
    min-width:360px;
    border-right:1px solid rgba(255,255,255,0.05);
  }

  header {
    text-align:center;
    margin-bottom:12px;
  }

  .title { font-size:22px; font-weight:700; margin-bottom:6px; }
  .status-pill {
    display:inline-flex; align-items:center; gap:8px;
    background:rgba(255,255,255,0.06); padding:6px 12px;
    border-radius:999px; font-size:13px;
  }
  .status-dot {
    width:10px; height:10px; border-radius:50%;
    background:var(--alert);
  }

  /* Parameter cards area */
  .params {
    display:flex; flex-wrap:wrap; gap:10px; justify-content:center;
  }
  .card {
    width:150px; min-height:80px;
    background:rgba(255,255,255,0.05);
    border-radius:12px; padding:10px;
    text-align:center; box-shadow:0 6px 18px rgba(0,0,0,0.5);
  }
  .card .label { font-size:12px; color:var(--muted); }
  .card .value { font-size:20px; font-weight:700; margin-top:4px; }

  /* Main status */
  .main-status {
    background:rgba(255,255,255,0.03);
    border-radius:12px; padding:16px; width:240px;
    text-align:center; box-shadow:0 8px 24px rgba(0,0,0,0.5);
  }
  .big-number { font-size:36px; font-weight:800; }
  .mode-pill {
    display:inline-block; background:rgba(255,255,255,0.06);
    padding:6px 12px; border-radius:8px; font-weight:700;
  }

  /* Controls */
  .controls {
    display:flex; flex-wrap:wrap; justify-content:center;
    gap:10px; width:260px;
  }
  .btn-3d {
    min-width:68px; height:56px; border-radius:12px;
    background:linear-gradient(180deg,#0e2a36,#062026);
    display:inline-flex; align-items:center; justify-content:center;
    color:white; font-weight:700; border:none;
    box-shadow:0 6px 18px rgba(0,0,0,0.6);
    transition:transform 0.15s ease, box-shadow 0.15s ease;
  }
  .btn-3d:active { transform:translateY(6px); box-shadow:0 2px 8px rgba(0,0,0,0.6); }

  /* Joystick */
  .joystick-wrap { display:flex; flex-direction:column; align-items:center; gap:8px; }
  .joy {
    width:120px; height:120px; border-radius:999px;
    background:rgba(255,255,255,0.04);
    display:flex; align-items:center; justify-content:center;
    position:relative; touch-action:none;
    box-shadow:0 8px 24px rgba(0,0,0,0.5);
  }
  .joy .stick {
    position:absolute; width:44px; height:44px; border-radius:50%;
    background:linear-gradient(180deg,#ffffff22,#00000033);
    display:flex; align-items:center; justify-content:center;
    transition:none;
  }
  .joy .ring {
    position:absolute; width:92%; height:92%;
    border-radius:999px; border:1px dashed rgba(255,255,255,0.06);
  }
  .joy-val { font-weight:700; color:var(--accent); }
</style>
</head>
<body>
<div class="row-scroll">

  <!-- Section 1: Header + connection -->
  <section>
    <header>
      <div class="title">CryostatControl</div>
      <div class="status-pill">
        <div class="status-dot" id="connDot"></div>
        <span id="connText">Disconnected</span>
      </div>
    </header>
    <button class="btn-3d" id="connectBtn">Connect</button>
    <button class="btn-3d" id="disconnectBtn">Disconnect</button>
  </section>

  <!-- Section 2: Parameter cards -->
  <section>
    <h3>Parameters</h3>
    <div class="params" id="paramGrid"></div>
  </section>

  <!-- Section 3: Main Status -->
  <section>
    <div class="main-status">
      <div class="mode-pill" id="mode">Standby</div>
      <div class="big-number" id="cuts">0</div>
      <div style="margin-top:8px;">Blade Temp: <span id="bladeTemp">-- °C</span></div>
    </div>
  </section>

  <!-- Section 4: Controls -->
  <section>
    <h3>Controls</h3>
    <div class="controls">
      <button class="btn-3d" id="homeBtn">Home</button>
      <button class="btn-3d" id="cutBtn">Cut</button>
      <button class="btn-3d" id="fastCutBtn">Fast</button>
      <button class="btn-3d" id="pauseBtn">Pause</button>
      <button class="btn-3d" id="stopBtn">Stop</button>
    </div>
  </section>

  <!-- Section 5: Joystick -->
  <section>
    <div class="joystick-wrap">
      <div class="joy" id="joystick">
        <div class="ring"></div>
        <div class="stick" id="stick">⇵</div>
      </div>
      <div class="joy-val" id="joyVal">0.00</div>
    </div>
  </section>

</div>

<script>
/* --- Parameter cards --- */
const params = [
  {label:'Temperature', value:-20.0, unit:'°C'},
  {label:'Thickness', value:10.0, unit:'µm'},
  {label:'Humidity', value:45, unit:'%'},
  {label:'Blade Angle', value:15, unit:'°'},
  {label:'Motor RPM', value:120, unit:'rpm'},
  {label:'Vacuum', value:0.98, unit:'mbar'},
  {label:'Position', value:2.3, unit:'mm'}
];
const grid=document.getElementById('paramGrid');
params.forEach(p=>{
  const c=document.createElement('div');
  c.className='card';
  c.innerHTML=`<div class="label">${p.label}</div><div class="value">${p.value} ${p.unit}</div>`;
  grid.appendChild(c);
});

/* --- Connection --- */
const connDot=document.getElementById('connDot');
const connText=document.getElementById('connText');
document.getElementById('connectBtn').onclick=()=>{connDot.style.background='var(--ok)';connText.textContent='Connected';document.getElementById('mode').textContent='Manual';};
document.getElementById('disconnectBtn').onclick=()=>{connDot.style.background='var(--alert)';connText.textContent='Disconnected';document.getElementById('mode').textContent='Standby';};

/* --- Controls --- */
let cuts=0;
document.getElementById('cutBtn').onclick=()=>{cuts++;document.getElementById('cuts').textContent=cuts;};
document.getElementById('fastCutBtn').onclick=()=>{cuts+=3;document.getElementById('cuts').textContent=cuts;};

/* --- Joystick --- */
const joy=document.getElementById('joystick');
const stick=document.getElementById('stick');
const joyVal=document.getElementById('joyVal');
let centerY=0,active=false;
joy.addEventListener('touchstart',start,{passive:false});
joy.addEventListener('mousedown',start);
function start(e){
  active=true;
  const rect=joy.getBoundingClientRect();
  centerY=rect.top+rect.height/2;
  document.addEventListener('touchmove',move,{passive:false});
  document.addEventListener('mousemove',move);
  document.addEventListener('touchend',end);
  document.addEventListener('mouseup',end);
}
function move(e){
  if(!active)return;
  const y=e.touches?e.touches[0].clientY:e.clientY;
  const rect=joy.getBoundingClientRect();
  const radius=rect.height/2*0.7;
  let dy=centerY-y;
  if(dy>radius)dy=radius;if(dy<-radius)dy=-radius;
  const val=dy/radius;
  stick.style.transform=`translateY(${-dy}px)`;
  joyVal.textContent=val.toFixed(2);
}
function end(){
  active=false;
  stick.style.transition='transform .2s';
  stick.style.transform='translateY(0)';
  joyVal.textContent='0.00';
  setTimeout(()=>stick.style.transition='none',200);
  document.removeEventListener('touchmove',move);
  document.removeEventListener('mousemove',move);
}
</script>
</body>
</html>
